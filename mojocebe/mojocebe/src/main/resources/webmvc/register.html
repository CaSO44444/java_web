<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Register Page</title>
	<link rel="stylesheet" href="component/pear/css/pear.css" />
	<link rel="stylesheet" href="admin/css/other/login.css" />
</head>
<!-- 代 码 结 构 -->
<body background="admin/images/background2.svg" style="background-size: cover;">
<form class="layui-form" action="javascript:void(0);">
	<div class="layui-form-item">
		<img class="logo" src="admin/images/logo.png" />
		<div class="title">魔方His-Register</div>
		<div class="desc">
			魔方医院信息系统注册页面
		</div>
	</div>
	<div class="layui-form-item">
		<input placeholder="账 户 : 用户名 " name="username" hover class="layui-input"  />
	</div>
	<div class="layui-form-item">
		<input placeholder="密 码 : ****** " name="password" type="password" hover class="layui-input"/>
	</div>
	<div class="layui-form-item">
		<input placeholder="确 认 密 码 : ****** " name="check_password" type="password" hover class="layui-input"/>
	</div>

	<div class="layui-form-item">
		<input type="text" name="verifyCode" placeholder="请输入验证码" hover class="layui-input" required="true">
		<img alt="单击图片刷新！" class="pointer" src="/common/kaptcha"
			 onclick="this.src='/common/kaptcha?d='+new Date()*1">
		</br>
	</div>

	<div class="layui-form-item">
		<button class="pear-btn pear-btn-success register" lay-submit lay-filter="register">
			注 册
		</button>

	</div>
</form>
<!-- 资 源 引 入 -->
<script src="component/layui/layui.js"></script>
<script src="component/pear/pear.js"></script>
<script>
	layui.use(['form', 'element', 'jquery', 'button', 'popup'], function() {
		var form = layui.form;
		var element = layui.element;
		var button = layui.button;
		var popup = layui.popup;
		var $ = layui.jquery;

		// 登 录 提 交
		form.on('submit(register)', function(data) {

			$.ajax({
				url:'http://127.0.0.1:8080/user/register',
				data:data.field,
				type:'post',
				xhrFields: {
					withCredentials: true // 发送Ajax时，Request header中会带上 Cookie 信息。
				},
				success:function(result){
					if(result.code==0){
						layer.msg(result.msg,{icon:1,time:1000},function(){
							//注册成功 跳转到登录页面
							location.href = "login.html"
						});
					}else{
						layer.msg(result.msg,{icon:2,time:1000},function(){
							location.href = "register.html"
						});
					}
				}
			})
		});
	})
</script>
</body>
</html>
